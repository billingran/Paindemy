<!-- /////////////////////////////////////////////// -->
<!--  my courses and favorites instructor title-->
<% if (authUser && authUser.roleUser == 'instructor') { %>
<section class="section_title">
  <h2 class="title">
    <iconify-icon icon="tabler:chef-hat" class="icon_title"></iconify-icon> <%=
    authUser.firstnameUser %> <%= authUser.lastnameUser %>
  </h2>
</section>

<!-- /////////////////////////////////////////////// -->
<!-- my courses instructor display and template-->
<section class="section_display section_mid">
  <div class="ctn_display">
    <div class="ctn_title_display">
      <div class="centralA icon_title_display">
        <i class="uil uil-book-alt"></i>
        <h2 class="title_display">Mes cours</h2>
      </div>
      <% if (allInstructorCourses && allInstructorCourses.length > 0) { %>
      <div class="mid_display">
        <a
          title="Aléatoire dans Mes cours"
          href="/course/onecourse/<%= mycourseInstructorRandom._id %>"
          class="ctn_viceTitle_display"
          >Aléatoire
          <iconify-icon
            icon="fa:random"
            class="icon_viceTitle_display"
          ></iconify-icon>
        </a>
      </div>
      <% } %>
    </div>
    <div>
      <ul class="ul_template_two">
        <% if(typeof allInstructorCourses !== 'undefined' &&
        allInstructorCourses != null && allInstructorCourses.length > 0) { %> <%
        allInstructorCourses.forEach(function(course){ %>
        <li class="ctn_template mid_template">
          <a
            title="<%= course.nameCourse %>"
            href="/course/onecourse/<%= course._id %>"
          >
            <div class="ctn_image_template">
              <div
                class="image_template"
                style="
                  background-image: url('/uploads/<%= course.imageCourse[0] %>');
                "
              ></div>
            </div>
          </a>
          <div class="ctn_content_template">
            <ul>
              <li class="content_template" title="Nom du cours">
                <div>
                  <i class="uil uil-book-alt icon_content_template"></i>
                </div>
                <div>
                  <a href="/course/onecourse/<%= course._id %>"
                    ><%= course.nameCourse %>
                  </a>
                </div>
              </li>

              <li class="content_template" title="Date et heure du cours">
                <div>
                  <i
                    class="uil uil-calender icon_content_template"
                    style="<%= moment(course.dateCourse).isSame(currentDate, 'day') ? 'color: #72b955;' : moment(course.dateCourse).isBefore(currentDate, 'day') ? 'color: #ff0066;' : '' %>"
                  ></i>
                </div>
                <div>
                  <a
                    style="<%= moment(course.dateCourse).isSame(currentDate, 'day') ? 'color: #72b955;' : moment(course.dateCourse).isBefore(currentDate, 'day') ? 'color: #ff0066;' : '' %>"
                    ><%= course.dateCourse %> / <%= course.timeCourse %>
                  </a>
                </div>
              </li>

              <li class="content_template" title="Nombre d'élèves du cours">
                <div>
                  <i class="uil uil-graduation-cap icon_content_template"></i>
                </div>
                <div>
                  <a><%= course.studentsCourse.length %> </a>
                </div>
              </li>

              <li
                class="content_template address_template"
                title="Nombre d'ingredients du cours"
              >
                <div>
                  <i class="uil uil-cell icon_content_template"></i>
                </div>
                <div>
                  <a> <%= course.ingredientsCourse.length %> </a>
                </div>
              </li>

              <li class="ctn_btns_template">
                <div class="createdAt_template">
                  <div>
                    <i class="uil uil-clock"></i> <%= course.getCreatedAt() %>
                  </div>
                </div>
                <div class="centralA">
                  <% if (authUser && authUser.roleUser == "instructor") { %>
                  <div
                    class="btns_template icon_update_template"
                    title="Mettre à jour le cours"
                  >
                    <a href="/instructor/updateclass/<%= course._id %>">
                      <i class="uil uil-redo"></i>
                    </a>
                  </div>
                  <div
                    class="btns_template icon_calculate_template"
                    title="Mon espace"
                  >
                    <a href="/instructor/myspace/<%= course._id %>">
                      <i class="uil uil-calculator-alt"></i>
                    </a>
                  </div>
                  <div
                    class="btns_template icon_plus_template"
                    title="surpprimer le cours"
                  >
                    <a
                      href="#"
                      class="btn_unregister_oneCourse"
                      id="<%= course._id %>"
                    >
                      <i class="uil uil-times"></i>
                    </a>
                  </div>
                  <% } %>
                  <div
                    class="btns_template icon_more_template"
                    title="Voir plus"
                  >
                    <a href="/course/onecourse/<%= course._id %>">
                      <i class="uil uil-ellipsis-h"></i>
                    </a>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </li>
        <% }) %> <% } else { %>
        <div class="ctn_msg error_msg">
          <strong>Aucun cours ajouté</strong>
        </div>
        <% } %>
      </ul>
    </div>
  </div>
</section>

<!-- /////////////////////////////////////////////// -->
<!-- my favorites instructor display and template-->
<section class="section_display section_mid">
  <div class="ctn_display">
    <div class="ctn_title_display">
      <div class="centralA icon_title_display">
        <i class="uil uil-heart"></i>
        <h2 class="title_display">Mes favoris</h2>
      </div>
      <% if (allInstructorFavorites && allInstructorFavorites.length > 0) { %>
      <div class="mid_display">
        <a
          title="Aléatoire dans Mes favoris"
          href="/<%= authUser.roleUser %>/myfavorite/<%= myFavoriteInstructorRandom._id %>"
          class="ctn_viceTitle_display"
          >Aléatoire
          <iconify-icon
            icon="fa:random"
            class="icon_viceTitle_display"
          ></iconify-icon>
        </a>
      </div>
      <% } %>
    </div>
    <div>
      <ul class="ul_template_two">
        <% if(typeof allInstructorFavorites !== 'undefined' &&
        allInstructorFavorites != null && allInstructorFavorites.length > 0) {
        %> <% allInstructorFavorites.forEach(function(favorite){ %>
        <li class="ctn_template mid_template">
          <a
            title="<%= favorite.nameFavorite %>"
            href="/<%= authUser.roleUser %>/myfavorite/<%= favorite._id %>"
          >
            <div class="ctn_image_template">
              <div
                class="image_template"
                style="
                  background-image: url('/uploads/<%= favorite.imageFavorite[0] %>');
                "
              ></div>
            </div>
          </a>
          <div class="ctn_content_template">
            <ul>
              <li class="content_template" title="Nom de la recette">
                <div>
                  <i class="uil uil-heart icon_content_template"></i>
                </div>
                <div>
                  <a
                    href="/<%= authUser.roleUser %>/myfavorite/<%= favorite._id %>"
                    ><%= favorite.nameFavorite %>
                  </a>
                </div>
              </li>

              <li class="content_template" title="Catégorie de la recette">
                <div>
                  <i class="uil uil-folder icon_content_template"></i>
                </div>
                <div>
                  <a><%= favorite.categoryFavorite.nameCategory %> </a>
                </div>
              </li>

              <li
                class="content_template"
                title="Nombre d'ingredients de la recette"
              >
                <div>
                  <i class="uil uil-cell icon_content_template"></i>
                </div>
                <div>
                  <a
                    ><%= Object.keys(favorite.ingredientsFavorite).length %>
                  </a>
                </div>
              </li>

              <li
                class="content_template address_template"
                title="Notes de la recette"
              >
                <div>
                  <i class="uil uil-file-alt icon_content_template"></i>
                </div>
                <div>
                  <a> <%= favorite.noteFavorite %> </a>
                </div>
              </li>

              <li class="ctn_btns_template">
                <div class="createdAt_template">
                  <div>
                    <i class="uil uil-clock"></i> <%= favorite.getCreatedAt() %>
                  </div>
                </div>
                <div class="centralA">
                  <% if (authUser && authUser.roleUser == "instructor") { %>
                  <div
                    class="btns_template icon_calculate_template"
                    title="Mettre à jour la recette"
                  >
                    <a
                      href="/<%= authUser.roleUser %>/myfavorite/<%= favorite._id %>"
                    >
                      <i class="uil uil-calculator-alt"></i>
                    </a>
                  </div>
                  <div
                    class="btns_template icon_plus_template"
                    title="surpprimer le recette"
                  >
                    <a
                      href="#"
                      class="btn_delete_oneFavorite"
                      id="<%= favorite._id %>"
                    >
                      <i class="uil uil-times"></i>
                    </a>
                  </div>
                  <% } %>
                </div>
              </li>
            </ul>
          </div>
        </li>
        <% }) %> <% } else { %>
        <div class="ctn_msg error_msg">
          <strong>Aucun favoris ajouté</strong>
        </div>
        <% } %>
      </ul>
    </div>
  </div>
</section>
<% } %>

<!-- /////////////////////////////////////////////// -->
<!--  my courses and favorites student title-->
<% if (authUser && authUser.roleUser == 'student') { %>

<section class="section_title">
  <h2 class="title">
    <i class="uil uil-graduation-cap icon_title"></i> <%= authUser.firstnameUser
    %> <%= authUser.lastnameUser %>
  </h2>
</section>

<!-- /////////////////////////////////////////////// -->
<!-- my courses student display and template-->
<section class="section_display section_mid">
  <div class="ctn_display">
    <div class="ctn_title_display">
      <div class="centralA icon_title_display">
        <i class="uil uil-book-alt"></i>
        <h2 class="title_display">Mes cours</h2>
      </div>
      <% if (allStudentCourses && allStudentCourses.length > 0) { %>
      <div class="mid_display">
        <a
          title="Aléatoire dans Mes cours"
          href="/course/onecourse/<%= mycourseStudentRandom._id %>"
          class="ctn_viceTitle_display"
          >Aléatoire
          <iconify-icon
            icon="fa:random"
            class="icon_viceTitle_display"
          ></iconify-icon>
        </a>
      </div>
      <% } %>
    </div>
    <div>
      <ul class="ul_template_two">
        <% if(typeof allStudentCourses !== 'undefined' && allStudentCourses !=
        null && allStudentCourses.length > 0) { %> <%
        allStudentCourses.forEach(function(course){ %>
        <li class="ctn_template mid_template">
          <a
            title="<%= course.nameCourse %>"
            href="/course/onecourse/<%= course._id %>"
          >
            <div class="ctn_image_template">
              <div
                class="image_template"
                style="
                  background-image: url('/uploads/<%= course.imageCourse[0] %>');
                "
              ></div>
            </div>
          </a>
          <div class="ctn_content_template">
            <ul>
              <li class="content_template" title="Nom du cours">
                <div>
                  <i class="uil uil-book-alt icon_content_template"></i>
                </div>
                <div>
                  <a href="/course/onecourse/<%= course._id %>"
                    ><%= course.nameCourse %>
                  </a>
                </div>
              </li>

              <li
                class="content_template"
                title="Instructeur/Instructrice du cours"
              >
                <div>
                  <iconify-icon
                    icon="tabler:chef-hat"
                    class="icon_content_template"
                  ></iconify-icon>
                </div>
                <div>
                  <a
                    href="/course/instructor/<%= course.instructorCourse._id %>"
                    ><%= course.instructorCourse.firstnameUser %> <%=
                    course.instructorCourse.lastnameUser %>
                  </a>
                </div>
              </li>

              <li class="content_template" title="Date et heure du cours">
                <div>
                  <i
                    class="uil uil-calender icon_content_template"
                    style="<%= moment(course.dateCourse).isSame(currentDate, 'day') ? 'color: #72b955;' : moment(course.dateCourse).isBefore(currentDate, 'day') ? 'color: #ff0066;' : '' %>"
                  ></i>
                </div>
                <div>
                  <a
                    style="<%= moment(course.dateCourse).isSame(currentDate, 'day') ? 'color: #72b955;' : moment(course.dateCourse).isBefore(currentDate, 'day') ? 'color: #ff0066;' : '' %>"
                    ><%= course.dateCourse %> / <%= course.timeCourse %>
                  </a>
                </div>
              </li>

              <li
                class="content_template address_template"
                title="Adresse du cours"
              >
                <div>
                  <i class="uil uil-map-marker icon_content_template"></i>
                </div>
                <div>
                  <a
                    href="https://www.google.com/maps?q=<%= encodeURIComponent(course.addressCourse) %>"
                    target="_blank"
                  >
                    <%= course.addressCourse %>
                  </a>
                </div>
              </li>

              <li class="ctn_btns_template">
                <div class="createdAt_template">
                  <div>
                    <i class="uil uil-clock"></i> <%= course.getCreatedAt() %>
                  </div>
                </div>
                <div class="centralA">
                  <% if (authUser && authUser.roleUser == "student" &&
                  authUser.idCoursesRegistered.some(function
                  (idCourseRegistered) { return idCourseRegistered.toString()
                  === course._id.toString() ; })) { %>
                  <div
                    class="btns_template icon_calculate_template"
                    title="Mon espace"
                  >
                    <a href="/student/myspace/<%= course._id %>">
                      <i class="uil uil-calculator-alt"></i>
                    </a>
                  </div>
                  <div
                    class="btns_template icon_plus_template"
                    title="surpprimer le cours"
                  >
                    <a
                      href="#"
                      class="btn_unregister_oneCourse"
                      id="<%= course._id %>"
                    >
                      <i class="uil uil-times"></i>
                    </a>
                  </div>
                  <% } %>
                  <div class="btns_template icon_more_template">
                    <a
                      title="Voir plus"
                      href="/course/onecourse/<%= course._id %>"
                    >
                      <i class="uil uil-ellipsis-h"></i>
                    </a>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </li>
        <% }) %> <% } else { %>
        <div class="ctn_msg error_msg">
          <strong>Aucun cours enregistré</strong>
        </div>
        <% } %>
      </ul>
    </div>
  </div>
</section>

<!-- /////////////////////////////////////////////// -->
<!-- my favorites student display and template-->
<section class="section_display section_mid">
  <div class="ctn_display">
    <div class="ctn_title_display">
      <div class="centralA icon_title_display">
        <i class="uil uil-book-alt"></i>
        <h2 class="title_display">Mes favoris</h2>
      </div>
      <% if (allStudentFavorites && allStudentFavorites.length > 0) { %>
      <div class="mid_display">
        <a
          title="Aléatoire dans Mes favoris"
          href="/<%= authUser.roleUser %>/myfavorite/<%= myFavoriteStudentRandom._id %>"
          class="ctn_viceTitle_display"
          >Aléatoire
          <iconify-icon
            icon="fa:random"
            class="icon_viceTitle_display"
          ></iconify-icon>
        </a>
      </div>
      <% } %>
    </div>
    <div>
      <ul class="ul_template_two">
        <% if(typeof allStudentFavorites !== 'undefined' && allStudentFavorites
        != null && allStudentFavorites.length > 0) { %> <%
        allStudentFavorites.forEach(function(favorite){ %>
        <li class="ctn_template mid_template">
          <a
            title="<%= favorite.nameFavorite %>"
            href="/<%= authUser.roleUser %>/myfavorite/<%= favorite._id %>"
          >
            <div class="ctn_image_template">
              <div
                class="image_template"
                style="
                  background-image: url('/uploads/<%= favorite.imageFavorite[0] %>');
                "
              ></div>
            </div>
          </a>
          <div class="ctn_content_template">
            <ul>
              <li class="content_template" title="Nom de la recette">
                <div>
                  <i class="uil uil-heart icon_content_template"></i>
                </div>
                <div>
                  <a
                    href="/<%= authUser.roleUser %>/myfavorite/<%= favorite._id %>"
                    ><%= favorite.nameFavorite %>
                  </a>
                </div>
              </li>

              <li class="content_template" title="Catégorie de la recette">
                <div>
                  <i class="uil uil-folder icon_content_template"></i>
                </div>
                <div>
                  <a><%= favorite.categoryFavorite.nameCategory %> </a>
                </div>
              </li>

              <li
                class="content_template"
                title="Nombre d'ingredients de la recette"
              >
                <div>
                  <i class="uil uil-cell icon_content_template"></i>
                </div>
                <div>
                  <a
                    ><%= Object.keys(favorite.ingredientsFavorite).length %>
                  </a>
                </div>
              </li>

              <li
                class="content_template address_template"
                title="Notes de la recette"
              >
                <div>
                  <i class="uil uil-file-alt icon_content_template"></i>
                </div>
                <div>
                  <a> <%= favorite.noteFavorite %> </a>
                </div>
              </li>

              <li class="ctn_btns_template">
                <div class="createdAt_template">
                  <div>
                    <i class="uil uil-clock"></i> <%= favorite.getCreatedAt() %>
                  </div>
                </div>
                <div class="centralA">
                  <% if (authUser && authUser.roleUser == "student") { %>
                  <div
                    class="btns_template icon_calculate_template"
                    title="Mettre à jour la recette"
                  >
                    <a
                      href="/<%= authUser.roleUser %>/myfavorite/<%= favorite._id %>"
                    >
                      <i class="uil uil-calculator-alt"></i>
                    </a>
                  </div>
                  <div
                    class="btns_template icon_plus_template"
                    title="surpprimer le recette"
                  >
                    <a
                      href="#"
                      class="btn_delete_oneFavorite"
                      id="<%= favorite._id %>"
                    >
                      <i class="uil uil-times"></i>
                    </a>
                  </div>
                  <% } %>
                </div>
              </li>
            </ul>
          </div>
        </li>
        <% }) %> <% } else { %>
        <div class="ctn_msg error_msg">
          <strong>Aucun favoris ajouté</strong>
        </div>
        <% } %>
      </ul>
    </div>
  </div>
</section>
<% } %> <%- include("./partials/footer") %>

<!-- front js -->
<script src="/js/header.js"></script>

<!-- axios js -->
<script src="/to_services/to_course_service.js"></script>
<script src="/to_services/to_favorite_service.js"></script>
